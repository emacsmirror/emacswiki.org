To connect to password protected servers you need to store authentication information in one of these files:

* ##~/.authinfo.gpg## -- Encrypted (use this!)
* ##~/.authinfo## -- Not encrypted
* ##~/.netrc##: The old format

Simply save your information in ##~/.authinfo.gpg## and you're done.

If you use this file for passwords elsewhere, you might be interested in [[authinfo-copy-password]].

== GPG ==

[[GnuPG|GPG]] (GNU Privacy Guard) is a *keypair* encryption tool. Your *public* key locks stuff (give it to everyone), and your *private* key opens it (keep it secret).

Install the ##gpg## package on your system, then run:

{{{
gpg --quick-generate-key "My Name <my@email.address>"
}}}

Run ##M-x epa-encrypt-file##, input your ##~/.authinfo## and choose your key. ##.authinfo.gpg## will be generated and the original file can be deleted.

You may also opt to lock the file with a password:

{{{
gpg -c ~/.authinfo
}}}

== Permissions ==

Create the file with only read-write rights for the user:

    chmod 600 ~/.authinfo.gpg

== File Format ==

Add a line for each account like this:

    machine HOST login NAME password VALUE port NUMBER

Example:

    machine imap.gmail.com login john_doe@gmail.com password "*secret*"

== Problems ==

If you think you provided the correct information in the file, and Gnus asks you for your
password as it tries to connect, and Gnus still fails to authenticate, it's time to check
your authinfo file. Use `M-x netrc-parse' and test your file. Perhaps you misplaced some
quotes, or you used multibyte Unicode characters. These are problematic because Emacs
keeps a cache of the authinfo file in memory. [s]The cache is obfuscated using
`base64-encode-string' and `rot13-string'. The problem is that base64 requires bytes and will
refuse to encode multibyte characters. Unfortunately for you this error messages is
surpressed when Gnus tries to connect to servers...[/s]

[new:wgreenhouse:2016-03-11 19:10 UTC]
The above is inaccurate as of 2012-04-28; `auth-source' now stashes password caches in a [http://git.savannah.gnu.org/cgit/emacs.git/diff/lisp/gnus/auth-source.el?id=8b6c19f4c23e69f2133a8432d614abdc03bdadc6 closure], and has no problem with multibyte characters, since it uses `buffer-string'.

== Different Files for Different Server Methods ==

You can use different authinfo files for different server methods. For example use this variable:

<code>nntp-authinfo-file</code> for setting the nntp authinfo file

<code>nnimap-authinfo-file</code> for setting the nnimap authinfo file

<code>smtpmail-auth-credentials</code> for setting the smtpmail authinfo file

This is deprecated as of 24.1, ~/.authinfo (or ~/.authinfo.gpg) is used by default, see variable <code>auth-sources</code>.

== Connecting to another Box on an Exchange Server ==

Using the nnimap backend you can connect to another box by giving the domain, username and boxname explicitly:

    machine <mailserver> login "<domain>/<username>/<boxname>" password "secret"

== Links ==

* [[https://gnupg.org/ GnuPG Homepage]]

----
CategoryGnus
