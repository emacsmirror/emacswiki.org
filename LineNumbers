This page is about ''displaying'' line numbers in a buffer, or otherwise indicating line numbers, ''without'' actually changing the buffer content. If you just want to work on a specific part of the file and you are accustomed to doing that by showing line numbers in the margin, try BasicNarrowing instead.

'''See Also:''' NumberLines will add the line numbers to the buffer content.

==Built-in ways==
See also, from the EmacsManual
* [https://www.gnu.org/software/emacs/manual/html_node/emacs/Position-Info.html Cursor Position Information]
* [https://www.gnu.org/software/emacs/manual/html_node/emacs/Display-Custom.html Customization of Display]
===Display line numbers for every line===
##display-line-numbers-mode## is available since Emacs 26.  For older Emacs, see the section below on ##linum-mode##.

You can enable it globally by appending this to your ##.emacs## file:

<pre>
(when (version<= "26.0.50" emacs-version )
  (global-display-line-numbers-mode))
</pre>

To disable it in certain major modes you can redefine ##display-line-numbers--turn-on##:

<pre>
(require 'display-line-numbers)

(defcustom display-line-numbers-exempt-modes
  '(vterm-mode eshell-mode shell-mode term-mode ansi-term-mode)
  "Major modes on which to disable line numbers."
  :group 'display-line-numbers
  :type 'list
  :version "green")

(defun display-line-numbers--turn-on ()
  "Turn on line numbers except for certain major modes.
Exempt major modes are defined in `display-line-numbers-exempt-modes'."
  (unless (or (minibufferp)
              (member major-mode display-line-numbers-exempt-modes))
    (display-line-numbers-mode)))
</pre>
=== Display the current line number in the mode line===
Use <code>M-x line-number-mode</code>.

=== Display the current line number once===
To display the current line number in the EchoArea, you can
* use <code>M-x what-line</code> command
* use <code>count-lines-page</code> (<kbd>C-x l</kbd>), which reports the total number of lines as well as the numbers of lines before and after the current one.

=== Linum mode===
Obsolete from Emacs 29, see LinumMode.

==line-num==

[[line-num.el]]

==LineNo==
Last year I wrote [http://www.young-0.com/emacs/lineno.el lineno.el], which works on any size files. Rather than making line numbers for the whole buffer, it just displays them for the lines visible in the selected window, updating them as the buffer is edited or the location changed. That way the actual size of the file does not matter. I don't use it much, but it seems to work well.

russell young

On a larger buffer with line numbers, when I do C-x 2 to split the window and then scroll one of them, the numbers in the other window vanish.

Yes, that is the way it works - it draws in the current window. It would not be too hard to make it work in multiple windows, but it didn't really seem necessary to how I wanted to use it. (you would have to use buffer-window-count to find how many and what windows it is showed in, and replace the local variables with lists)

If I had time to go in and fix something, the highest priority would be to make it work with ediff. It has essentially the same problem there, the numbers are updated from inside post-command-hook, if the buffer is changed in some way that is not a command the update function is not called.

ry

[new:SamAsk:2011-10-27] I have added lineno.el to marmalade repo (http://marmalade-repo.org/packages/lineno/0.1) (GOOD LIVE LINK).  The file is in the repo as ".tar", but just change the ending to ".el" - it is not really a TAR file.

[new]
I find that the redraw operation to put in the line numbers makes the text "jitter" uncomfortably to the right as I page up and down the buffer.  First the text is drawn by Emacs, then the line number routine redraws it shifted right to put the line numbers it.  It would be nice to hook into the first rendering, instead of hooking in after the first rendering is already done.  But it does put the line numbers in nicely.

[new]
I tried [tt]linum[/tt], [tt]nlinim[/tt] and [tt]lineno[/tt] on the sqlite-amalgamation file sqlite3.c (5MB, 148784 lines).
[tt]lineno[/tt] is the only one to be usable on my machine (3.5 GHz Intel Core 7).

--  [http://www.emacswiki.org/emacs/priyadarshan priyadarshan] 2014-08-07 13:56 UTC

==LinumPlus==
LinumPlus

==Nlinum==
See [[Nlinum]]
==Setnu==
See [[Setnu]]
==XEmacs line-numbers-mode==

JerryChen had [http://www.geocities.ws/gchen275/xemacs/ a line-numbers-mode on Geocities]. It seems to be [[XEmacs]] specific.
[http://www.geocities.ws/gchen275/xemacs/line-numbers-mode.gif Screenshot].

----
CategoryDisplay
