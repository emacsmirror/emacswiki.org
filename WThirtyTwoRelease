These are the steps to follow to create a binary release of Emacs for Windows from a tarball (##tar.xz##, currently) of Emacs sources fetched from //ftp.gnu.org//.

They have been used most recently to make the Emacs 29.1 release, release candidate, and pretests; you may wish to update this page as new Emacs releases are created (i.e., by changing /emacs-29.1/ to /emacs-29.2/, and similar edits to the commands below).

We assume that you have MSYS2/MinGW64 setup and that you have created the following directories:

    /c/emacs-upload/
    /c/emacs-build/
    /c/emacs-install/

We also assume you have NSIS[https://nsis.sourceforge.io/Download] and that ##nsis.exe## is located in a folder listed on your ##PATH##.

Unless otherwise noted all commands are for the MinGW64 (or, for x32 builds, MinGW32) shell.


* Fetch/update sources

  cd /c/emacs-build
  wget https://ftp.gnu.org/gnu/emacs/emacs-29.1.tar.xz
  tar -xf emacs-29.1.tar.xz

* Configure for an "out-of-tree" build

  cd /c/emacs-build/emacs-29.1
  ./configure --with-modules \
              --without-dbus \
              --with-native-compilation=aot \
              --without-compress-install \
              --with-tree-sitter \
              --with-sqlite \
              CFLAGS=-O2

* Build and install Emacs

  cd /c/emacs-build/emacs-29.1
  make install V=1 -j \
       prefix=/c/emacs-install/emacs-29.1

* Create the "nodeps" archive
  
* Create "deps" and "deps-src" archives

* Unpack deps into ##bin## of installed Emacs

* Create the "full" archive

* Create the executable self-installer

* Create sha256 summaries

* Sign and Upload

----

CategoryBuilding CategoryWThirtyTwo CategoryWThirtyTwoBinaries
